# DR-003: 説明欄を展開してから全文を取得する

- **日付**: 2026-02-28
- **ステータス**: 採用

## 背景

動画の説明文が一部しか取得できていないことが判明した。取得されるテキストは、説明欄が折りたたまれた状態で表示される冒頭部分のみだった。

## 原因

`injectedGetTranscriptInfo()` 内で説明文を `#attributed-snippet-text` から取得しているが、この時点ではYouTubeの説明欄が折りたたまれた状態のため、展開前の一部テキストしかDOMに反映されていなかった。

## 修正

説明文の取得前に展開ボタン（`#expand`）をクリックし、500ms待機してからテキストを取得するように変更。

副次的な効果として、説明欄が展開されることで「文字起こしを表示」ボタンも露出するため、字幕パネルのオープン処理も安定する。

## 変更ファイル

- `extension/background.js` — `injectedGetTranscriptInfo()` のメタデータ収集部分
